<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Project Carousel — Example</title>
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--muted:#9aa4b2;--glass: rgba(255,255,255,0.03);}    
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;color:#e6eef6;background:linear-gradient(180deg,#071022 0%, #081426 60%);min-height:100vh;display:flex;align-items:center;justify-content:center;padding:32px}

    .carousel-wrap{width:100%;max-width:1100px}
    .carousel{position:relative;overflow:visible}

    /* slides container */
    .slides{display:flex;gap:20px;transition:transform .45s cubic-bezier(.22,.9,.2,1);padding:6px}
    .slide{min-width:320px;max-width:360px;background:linear-gradient(180deg,var(--card),#081424);border-radius:14px;padding:18px;box-shadow:0 6px 22px rgba(2,6,23,.6);flex-shrink:0;border:1px solid rgba(255,255,255,0.04)}

    .brand{display:flex;align-items:center;gap:12px}
    .brand-icon{width:56px;height:56px;border-radius:10px;display:inline-grid;place-items:center;color:white;font-weight:700}
    .title{font-size:18px;font-weight:700;margin:0}
    .muted{color:var(--muted);font-size:13px;margin-top:4px}

    .desc{margin:12px 0 6px;font-size:14px;color:#d8e6f8}
    .meta{display:flex;gap:8px;flex-wrap:wrap;margin-top:12px}
    .chip{background:var(--glass);padding:6px 8px;border-radius:8px;font-size:12px;color:var(--muted);border:1px solid rgba(255,255,255,0.03)}

    .card-footer{display:flex;align-items:center;justify-content:space-between;margin-top:14px}
    .btn{padding:8px 12px;border-radius:10px;background:transparent;border:1px solid rgba(255,255,255,0.06);color:#dff2ff;font-weight:600;font-size:13px;cursor:pointer}

    /* controls */
    .controls{position:absolute;left:12px;right:12px;top:50%;transform:translateY(-50%);display:flex;justify-content:space-between;pointer-events:none}
    .control-btn{pointer-events:auto;background:rgba(0,0,0,0.35);border:0;padding:10px;border-radius:10px;color:white;cursor:pointer;backdrop-filter:blur(4px)}

    /* indicators */
    .indicators{display:flex;gap:8px;justify-content:center;margin-top:18px}
    .dot{width:10px;height:10px;border-radius:999px;background:rgba(255,255,255,0.06);cursor:pointer}
    .dot.active{background:linear-gradient(90deg,#5eead4,#60a5fa)}

    /* responsive */
    @media (max-width:900px){.slide{min-width:280px}}
    @media (max-width:520px){.slides{gap:12px}.slide{min-width:240px;padding:14px}}
  </style>
</head>
<body>
  <div class="carousel-wrap">
    <div class="carousel" aria-roledescription="carousel">
      <div class="controls" aria-hidden="false">
        <button class="control-btn" id="prev" aria-label="Previous project">◀</button>
        <button class="control-btn" id="next" aria-label="Next project">▶</button>
      </div>

      <div class="slides" id="slides" aria-live="polite"></div>

      <div class="indicators" id="indicators" role="tablist" aria-label="Project list"></div>
    </div>
  </div>

  <!--
    Sample JSON dataset for demo. Replace this embedded data with a real JSON file
    or fetch() from your server. The carousel maps these fields when rendering:
    id, name, brand.icon, brand.color, description.short, date.published, tags[], technologies[], links.demo
  -->

  <script>
    const projects = [
      {
        "id":"weather-widget",
        "name":"Weather Widget",
        "brand":{ "icon":"https://via.placeholder.com/64?text=W","color":"#4A90E2"},
        "description":{ "short":"Compact multi-theme weather widget built with vanilla JS." },
        "date":{ "published":"2023-06-15T00:00:00Z" },
        "tags":["widget","weather","vanilla-js"],
        "technologies":["JavaScript","CSS","OpenWeatherMap API"],
        "links":{ "demo":"#" },
        "featured":true
      },
      {
        "id":"folio-architect",
        "name":"Folio Architect",
        "brand":{ "icon":"https://via.placeholder.com/64?text=F","color":"#D946EF"},
        "description":{ "short":"A minimal portfolio starter with CMS integration and drag & drop." },
        "date":{ "published":"2024-01-21T00:00:00Z" },
        "tags":["portfolio","cms","react"],
        "technologies":["React","TailwindCSS","Netlify"],
        "links":{ "demo":"#" },
        "featured":true
      },
      {
        "id":"market-cards",
        "name":"Market Cards",
        "brand":{ "icon":"https://via.placeholder.com/64?text=M","color":"#FB923C"},
        "description":{ "short":"Product card grid with accessible controls and quick-add." },
        "date":{ "published":"2022-09-10T00:00:00Z" },
        "tags":["ecommerce","ui","a11y"],
        "technologies":["Vue","SCSS","Stripe"],
        "links":{ "demo":"#" },
        "featured":false
      },
      {
        "id":"viz-suite",
        "name":"Viz Suite",
        "brand":{ "icon":"https://via.placeholder.com/64?text=V","color":"#10B981"},
        "description":{ "short":"Data visualization components for dashboards and reports." },
        "date":{ "published":"2024-07-07T00:00:00Z" },
        "tags":["data","visualization","d3"],
        "technologies":["D3.js","TypeScript","SVG"],
        "links":{ "demo":"#" },
        "featured":true
      },
      {
        "id":"pixel-gallery",
        "name":"Pixel Gallery",
        "brand":{ "icon":"https://via.placeholder.com/64?text=P","color":"#F472B6"},
        "description":{ "short":"Lightweight photo gallery with lazy loading and masonry layout." },
        "date":{ "published":"2021-11-02T00:00:00Z" },
        "tags":["gallery","photos","performance"],
        "technologies":["JavaScript","IntersectionObserver","CSS Grid"],
        "links":{ "demo":"#" },
        "featured":false
      }
    ];

    // Carousel state
    const slidesEl = document.getElementById('slides');
    const indicatorsEl = document.getElementById('indicators');
    const prevBtn = document.getElementById('prev');
    const nextBtn = document.getElementById('next');

    let currentIndex = 0;
    const visible = 3; // how many cards are visible at once visually (used for centering)

    function formatDate(iso){
      try{ const d = new Date(iso); return d.toLocaleDateString(); }catch(e){return ''}
    }

    function buildSlide(p){
      const wrap = document.createElement('article');
      wrap.className = 'slide';
      wrap.setAttribute('role','group');

      const brand = document.createElement('div'); brand.className='brand';
      const icon = document.createElement('div'); icon.className='brand-icon'; icon.style.background = p.brand.color || '#111';
      icon.innerHTML = `<img src="${p.brand.icon}" alt="${p.name} logo" style="width:44px;height:44px;border-radius:8px;object-fit:cover">`;
      brand.appendChild(icon);

      const t = document.createElement('div');
      const title = document.createElement('h3'); title.className='title'; title.textContent = p.name;
      const sub = document.createElement('div'); sub.className='muted'; sub.textContent = p.technologies ? p.technologies.join(' • ') : '';
      t.appendChild(title); t.appendChild(sub);
      brand.appendChild(t);

      const desc = document.createElement('p'); desc.className='desc'; desc.textContent = p.description.short;

      const meta = document.createElement('div'); meta.className='meta';
      (p.tags||[]).slice(0,4).forEach(tag => { const c = document.createElement('span'); c.className='chip'; c.textContent = tag; meta.appendChild(c); });

      const footer = document.createElement('div'); footer.className='card-footer';
      const btn = document.createElement('a'); btn.className='btn'; btn.href = p.links?.demo || '#'; btn.textContent = 'View demo';
      footer.appendChild(btn);
      const pub = document.createElement('div'); pub.className='muted'; pub.style.fontSize='12px'; pub.textContent = formatDate(p.date?.published);
      footer.appendChild(pub);

      wrap.appendChild(brand);
      wrap.appendChild(desc);
      wrap.appendChild(meta);
      wrap.appendChild(footer);

      return wrap;
    }

    function render(){
      slidesEl.innerHTML = '';
      indicatorsEl.innerHTML = '';

      projects.forEach((p, i)=>{
        const slide = buildSlide(p);
        slidesEl.appendChild(slide);

        const dot = document.createElement('button'); dot.className='dot'; dot.setAttribute('aria-label', p.name); dot.dataset.index = i;
        dot.addEventListener('click', ()=>goTo(i));
        indicatorsEl.appendChild(dot);
      });

      update();
    }

    function update(){
      // clamp currentIndex
      currentIndex = Math.max(0, Math.min(projects.length - 1, currentIndex));
      // translate to center current slide (basic centering formula)
      const slideWidth = document.querySelector('.slide').offsetWidth + parseFloat(getComputedStyle(slidesEl).gap || 20);
      const containerWidth = document.querySelector('.carousel-wrap').offsetWidth;
      // try to center current: compute offset so current slide is roughly centered
      const centerOffset = Math.max(0, (slideWidth * currentIndex) - (containerWidth - slideWidth)/2);
      slidesEl.style.transform = `translateX(${-centerOffset}px)`;

      // indicators
      Array.from(indicatorsEl.children).forEach((d, idx)=> d.classList.toggle('active', idx===currentIndex));
    }

    function prev(){ currentIndex = Math.max(0, currentIndex - 1); update(); }
    function next(){ currentIndex = Math.min(projects.length - 1, currentIndex + 1); update(); }
    function goTo(i){ currentIndex = i; update(); }

    prevBtn.addEventListener('click', prev);
    nextBtn.addEventListener('click', next);

    // keyboard navigation
    window.addEventListener('keydown', (e)=>{ if(e.key === 'ArrowLeft') prev(); if(e.key === 'ArrowRight') next(); });

    // resize handling
    window.addEventListener('resize', ()=> requestAnimationFrame(update));

    // autoplay (pauses while hovering)
    let autoplay = true;
    let autoplayInterval = 4000;
    let timer = null;
    function startAuto(){ if(timer) clearInterval(timer); timer = setInterval(()=>{ if(autoplay){ currentIndex = (currentIndex + 1) % projects.length; update(); } }, autoplayInterval); }
    function stopAuto(){ if(timer) clearInterval(timer); timer = null; }

    document.querySelector('.carousel').addEventListener('mouseenter', ()=> autoplay = false);
    document.querySelector('.carousel').addEventListener('mouseleave', ()=> autoplay = true);

    // initial render
    render();
    startAuto();

    // Example: to use external JSON instead of the built-in `projects` array,
    // replace the `projects` variable (above) with a fetch() call that loads
    // your JSON and then call render(). Keep CORS in mind if your JSON file
    // is served from another origin.

  </script>
</body>
</html>
